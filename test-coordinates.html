<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Coordonn√©es</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-result {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }
        .success { border-left-color: #38a169; }
        .error { border-left-color: #e53e3e; }
    </style>
</head>
<body>
    <h1>üß™ Test des Coordonn√©es</h1>
    <div id="results"></div>

    <script type="module">
        import levels from './levels.js';

        function testCoordinates() {
            const results = document.getElementById('results');
            let html = '';

            // Test 1: V√©rifier que les zombies ont des coordonn√©es de grille
            html += '<div class="test-result">';
            html += '<h3>Test 1: Coordonn√©es zombies</h3>';
            
            let zombieTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.entities) {
                    room.entities.forEach(entity => {
                        if (entity.type === 'zombie') {
                            html += `<p>üßü Zombie dans ${roomName}: x=${entity.x}, y=${entity.y}</p>`;
                            
                            // V√©rifier que les coordonn√©es sont dans la grille 25x18
                            if (entity.x < 0 || entity.x >= 25 || entity.y < 0 || entity.y >= 18) {
                                html += `<p class="error">‚ùå Coordonn√©es hors grille !</p>`;
                                zombieTestPassed = false;
                            } else {
                                html += `<p class="success">‚úÖ Coordonn√©es valides</p>`;
                            }
                        }
                    });
                }
            });
            html += '</div>';

            // Test 2: V√©rifier que les portes ont des coordonn√©es de grille
            html += '<div class="test-result">';
            html += '<h3>Test 2: Coordonn√©es portes</h3>';
            
            let doorTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.doors) {
                    room.doors.forEach(door => {
                        html += `<p>üö™ Porte dans ${roomName}: x=${door.x}, y=${door.y}</p>`;
                        
                        if (door.x < 0 || door.x >= 25 || door.y < 0 || door.y >= 18) {
                            html += `<p class="error">‚ùå Coordonn√©es hors grille !</p>`;
                            doorTestPassed = false;
                        } else {
                            html += `<p class="success">‚úÖ Coordonn√©es valides</p>`;
                        }
                    });
                }
            });
            html += '</div>';

            // Test 3: V√©rifier la coh√©rence du format
            html += '<div class="test-result">';
            html += '<h3>Test 3: Coh√©rence du format</h3>';
            
            let formatTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.entities) {
                    room.entities.forEach(entity => {
                        if (entity.type === 'zombie') {
                            // V√©rifier que ce sont des nombres entiers
                            if (!Number.isInteger(entity.x) || !Number.isInteger(entity.y)) {
                                html += `<p class="error">‚ùå Coordonn√©es zombies non enti√®res dans ${roomName}</p>`;
                                formatTestPassed = false;
                            }
                        }
                    });
                }
                if (room.doors) {
                    room.doors.forEach(door => {
                        if (!Number.isInteger(door.x) || !Number.isInteger(door.y)) {
                            html += `<p class="error">‚ùå Coordonn√©es portes non enti√®res dans ${roomName}</p>`;
                            formatTestPassed = false;
                        }
                    });
                }
            });
            
            if (formatTestPassed) {
                html += '<p class="success">‚úÖ Format coh√©rent</p>';
            }
            html += '</div>';

            // R√©sum√©
            html += '<div class="test-result">';
            html += '<h3>üìä R√©sum√©</h3>';
            if (zombieTestPassed && doorTestPassed && formatTestPassed) {
                html += '<p class="success">üéâ Tous les tests sont pass√©s ! Les coordonn√©es sont harmonis√©es.</p>';
            } else {
                html += '<p class="error">‚ùå Certains tests ont √©chou√©.</p>';
            }
            html += '</div>';

            results.innerHTML = html;
        }

        // Ex√©cuter les tests
        testCoordinates();
    </script>
</body>
</html> 