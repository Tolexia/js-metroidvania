<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coordinate Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-result {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }
        .success { border-left-color: #38a169; }
        .error { border-left-color: #e53e3e; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Coordinate Test</h1>
    <div id="results"></div>

    <script type="module">
        import levels from './levels.js';

        function testCoordinates() {
            const results = document.getElementById('results');
            let html = '';

            // Test 1: Check that zombies have grid coordinates
            html += '<div class="test-result">';
            html += '<h3>Test 1: Zombie coordinates</h3>';
            
            let zombieTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.entities) {
                    room.entities.forEach(entity => {
                        if (entity.type === 'zombie') {
                            html += `<p>ğŸ§Ÿ Zombie in ${roomName}: x=${entity.x}, y=${entity.y}</p>`;
                            
                            // Check that coordinates are within 25x18 grid
                            if (entity.x < 0 || entity.x >= 25 || entity.y < 0 || entity.y >= 18) {
                                html += `<p class="error">âŒ Coordinates out of grid!</p>`;
                                zombieTestPassed = false;
                            } else {
                                html += `<p class="success">âœ… Valid coordinates</p>`;
                            }
                        }
                    });
                }
            });
            html += '</div>';

            // Test 2: Check that doors have grid coordinates
            html += '<div class="test-result">';
            html += '<h3>Test 2: Door coordinates</h3>';
            
            let doorTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.doors) {
                    room.doors.forEach(door => {
                        html += `<p>ğŸšª Door in ${roomName}: x=${door.x}, y=${door.y}</p>`;
                        
                        if (door.x < 0 || door.x >= 25 || door.y < 0 || door.y >= 18) {
                            html += `<p class="error">âŒ Coordinates out of grid!</p>`;
                            doorTestPassed = false;
                        } else {
                            html += `<p class="success">âœ… Valid coordinates</p>`;
                        }
                    });
                }
            });
            html += '</div>';

            // Test 3: Check format consistency
            html += '<div class="test-result">';
            html += '<h3>Test 3: Format consistency</h3>';
            
            let formatTestPassed = true;
            Object.entries(levels).forEach(([roomName, room]) => {
                if (room.entities) {
                    room.entities.forEach(entity => {
                        if (entity.type === 'zombie') {
                            // Check that they are integers
                            if (!Number.isInteger(entity.x) || !Number.isInteger(entity.y)) {
                                html += `<p class="error">âŒ Non-integer zombie coordinates in ${roomName}</p>`;
                                formatTestPassed = false;
                            }
                        }
                    });
                }
                if (room.doors) {
                    room.doors.forEach(door => {
                        if (!Number.isInteger(door.x) || !Number.isInteger(door.y)) {
                            html += `<p class="error">âŒ Non-integer door coordinates in ${roomName}</p>`;
                            formatTestPassed = false;
                        }
                    });
                }
            });
            
            if (formatTestPassed) {
                html += '<p class="success">âœ… Consistent format</p>';
            }
            html += '</div>';

            // Summary
            html += '<div class="test-result">';
            html += '<h3>ğŸ“Š Summary</h3>';
            if (zombieTestPassed && doorTestPassed && formatTestPassed) {
                html += '<p class="success">ğŸ‰ All tests passed! Coordinates are harmonized.</p>';
            } else {
                html += '<p class="error">âŒ Some tests failed.</p>';
            }
            html += '</div>';

            results.innerHTML = html;
        }

        // Run tests
        testCoordinates();
    </script>
</body>
</html> 